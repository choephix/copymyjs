---
title: "URL Parameters Proxy"
publishDate: "2024-12-21"
description: "Sync state with URL parameters using a Proxy object"
draft: true
category: "helpers"
version: 1
---

import CodeSnippet from '@/components/CodeSnippet.astro';
import Example from '@/components/Example.astro';

# URL Parameters Proxy

A TypeScript utility that creates a proxy object to seamlessly sync state with URL parameters. It provides a clean interface for reading and writing URL parameters while maintaining type safety.

## Implementation

<CodeSnippet file="url-params-proxy.ts" />

## Live Example

Try it out by setting and deleting URL parameters:

<Example component="url-params-example" />

## Features

- **Type Safety**: Full TypeScript support with inferred types from defaults
- **Automatic Type Conversion**: Handles numbers, booleans, and JSON objects
- **URL Sync**: Updates URL without page refresh using History API
- **Default Values**: Fallback to defaults when parameters are not in URL
- **Delete Support**: Remove parameters from URL

## Usage Examples

### Basic Usage

```typescript
const params = createUrlParamsProxy({
  theme: 'light',
  page: 1,
  showSidebar: true
});

// Read values (falls back to defaults if not in URL)
console.log(params.theme); // 'light'
console.log(params.page); // 1

// Update values (updates URL automatically)
params.theme = 'dark';
params.page = 2;

// Delete values
delete params.showSidebar;
```

### Complex Objects

```typescript
const params = createUrlParamsProxy({
  filters: { category: 'all', active: true },
  sort: { field: 'name', order: 'asc' }
});

// Objects are automatically serialized/deserialized
params.filters = { category: 'books', active: false };
```

### Type Safety

```typescript
interface AppParams {
  theme: 'light' | 'dark';
  page: number;
  filters: {
    category: string;
    active: boolean;
  };
}

const params = createUrlParamsProxy<AppParams>({
  theme: 'light',
  page: 1,
  filters: { category: 'all', active: true }
});

// TypeScript error: invalid theme value
params.theme = 'blue';
```

## Common Use Cases

1. **Pagination State**: Keep page numbers and filters in sync with URL
2. **Theme Switching**: Persist theme preference in URL
3. **Filter/Sort State**: Maintain complex filter/sort states
4. **Form State**: Save form progress in URL for sharing/bookmarking

## Best Practices

- Provide sensible default values
- Use TypeScript interfaces for better type safety
- Consider URL length limitations with complex objects
- Use meaningful parameter names
- Handle edge cases when parsing values
